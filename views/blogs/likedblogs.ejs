<% layout('/layouts/boilerplate') %>
<style>
  body {
    background-image: url("https://res.cloudinary.com/dtwbilva0/image/upload/v1766130073/your_blogs_3_tfmq3h.jpg");
    background-size: cover;
    background-position: center;
    text-shadow: 0 0.05rem 0.1rem rgba(0, 0, 0, 0.5);
    box-shadow: inset 0 0 5rem rgba(0, 0, 0, 0.5);
  }

  h1,
  h3 {
    color: black;
  }

  .card {
    background-color: rgba(255, 255, 255, 0.8);
  }
  .card-title a {
    color: #000000;
    text-decoration: none;
  }

  .card-title a:hover {
    color: #000000;
    text-decoration: underline;
  }
</style>
<h1 class="text-center">Welcome Back "<%= currentUser.username %>"!!</h1>
<h3 class="text-center">Your Liked Blogs:</h3>
<ul>
  <% for(let blog of blogs){%> <% for(let like of blog.likes){ %> <%
  if(like._id.equals(currentUser._id)){ %>
  <div class="card mb-3 text-center">
    <div class="row g-0">
      <div class="col-md-4">
        <a href="/blogs/<%= blog._id%>">
          <% if (blog.logo && blog.logo.length > 0) { %>
          <img src="<%= blog.logo[0].url %>" class="img-fluid" alt="..." />
          <% } else { %>
          <img
            src="https://via.placeholder.com/400x250?text=No+Image"
            class="img-fluid"
            alt="No image"
          />
          <% } %>
        </a>
      </div>
      <div class="col-md-8">
        <div class="card-body">
          <h3 class="card-title">
            <a href="/blogs/<%= blog._id%>"> <%= blog.title %> </a>
          </h3>
          <h6 class="card-subtitle mb-2 text-body-secondary">
            <%= blog.shortdescription %>
          </h6>
          <h6>Published by: <b> <%= blog.author.username %> </b></h6>
          <% if(blog.likes.length) {%>
          <h6>Likes: <b> <%= blog.likes.length %> </b></h6>
          <% } %> <% if(blog.likes.length) {%>
          <h6>
            Dislikes:
            <b> <%= blog.dislikes.length %> </b>
          </h6>
          <% } %>
        </div>
      </div>
    </div>
  </div>
  <% } %> <% } %> <% } %>
</ul>
